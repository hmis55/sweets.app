<div class="container">
  <div class="row mt-4">
    <div class="col-md-4">
      <div class="text-center">
        <% if @post.image.attached? %>
          <%= image_tag @post.image, class: "img-fluid" %>
        <% else %>
          <%= image_tag 'no_image.jpg', class: "img-fluid" %>
        <% end %>
      </div>
    </div>
    <div class="col-md-8">
      <h2><%= @post.title %></h2>
      <p><%= @post.body %></p>
      <p>投稿日時：<%= @post.created_at.strftime('%Y/%m/%d') %></p>
      <p>コメント件数：<%= @post.post_comment.count %></p>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-8 offset-md-4">
      <%= form_with model: [@post, @post_comment], class: "mt-3" do |f| %>
        <%= f.text_area :comment, rows: '5', class: "form-control", placeholder: "コメントをここに記入してください" %>
        <%= f.submit "送信する", class: "btn btn-primary mt-2" %>
      <% end %>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-8 offset-md-4">
      <h3>コメント</h3>
      <% @post.post_comment.each do |post_comment| %>
        <div class="border p-3 mb-3">
          <%= post_comment.user.name %>（<%= post_comment.created_at.strftime('%Y/%m/%d') %>）<br>
          <%= post_comment.comment %>
          <% if post_comment.user == current_user %>
            <%= link_to "削除", post_post_comment_path(post_comment.post, post_comment), method: :delete, class: "btn btn-danger btn-sm mt-2" %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
